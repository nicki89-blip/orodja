<!doctype html>
<html lang="sl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moji Linki</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { box-sizing: border-box; }
    .app-icon { transition: transform 0.2s ease, opacity 0.2s ease; }
    .app-icon:active { transform: scale(0.95); opacity: 0.8; }
    .delete-mode .app-icon { animation: wiggle 0.3s ease-in-out infinite; }
    @keyframes wiggle { 0%, 100% { transform: rotate(-1deg); } 50% { transform: rotate(1deg); } }
    .delete-badge { transition: opacity 0.2s ease; }
    .modal-backdrop { backdrop-filter: blur(8px); }
    .toast { animation: slideIn 0.3s ease-out; }
    @keyframes slideIn { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #16213e; }
    ::-webkit-scrollbar-thumb { background: #3282b8; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #0f4c75; }
  </style>
 </head>
 <body class="h-full">
  <div id="app-wrapper" class="h-full w-full overflow-auto"></div>
  <script>
    const config = {
      background_color: "#1a1a2e",
      surface_color: "#16213e",
      text_color: "#edf2f4",
      primary_action_color: "#0f4c75",
      secondary_action_color: "#3282b8",
      font_family: "system-ui",
      font_size: 16,
      page_title: "Moji Linki",
      add_button_text: "Dodaj svojo"
    };

    // ‚¨áÔ∏è TUKAJ SO VA≈†E JAVNE STRANI ‚¨áÔ∏è
    const publicWebsites = [
      { 
        id: "public_1", 
        name: "Bingo", 
        url: "https://nicki89-blip.github.io/bingo/", 
        icon: "üåê", 
        color: "#4285F4" 
      },
      { 
        id: "public_2", 
        name: "Angle≈°ƒçina", 
        url: "https://nicki89-blip.github.io/angslo/", 
        icon: "üì∫", 
        color: "#FF0000" 
      },
      { 
        id: "public_3", 
        name: "Pospravimo razred", 
        url: "https://https://larakin.my.canva.site/cleanup.com", 
        icon: "üé®", 
        color: "#00C4CC" 
      },
      { 
        id: "public_3", 
        name: "Naredi test", 
        url: "hhttps://nicki89-blip.github.io/test-maker/", 
        icon: "üé®", 
        color: "#00C4CC" 
      },
    ];

    let currentWebsites = [];
    let deleteMode = false;
    const iconOptions = ["üåê", "üì±", "üíª", "üé®", "üìä", "üõçÔ∏è", "üì∞", "üéÆ", "üìö", "üéµ", "üì∑", "‚úâÔ∏è", "üîß", "‚ö°", "üåü", "üöÄ"];
    const colorOptions = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#f7b731", "#5f27cd", "#00d2d3", "#ff9ff3", "#54a0ff", "#48dbfb", "#1dd1a1"];
    const STORAGE_KEY = "website_launcher_db";

    function loadData() {
        let savedData = [];
        const localData = localStorage.getItem(STORAGE_KEY);
        if (localData) { savedData = JSON.parse(localData); }
        currentWebsites = [...publicWebsites, ...savedData];
        renderWebsites();
    }

    function saveLocalData(newWebsite) {
        let localData = [];
        const existingData = localStorage.getItem(STORAGE_KEY);
        if (existingData) { localData = JSON.parse(existingData); }
        localData.push(newWebsite);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(localData));
        loadData();
    }

    function deleteLocalData(websiteId) {
        const isPublic = publicWebsites.find(w => w.id === websiteId);
        if (isPublic) { showToast("Javnih strani ni mogoƒçe izbrisati!"); return; }
        let localData = [];
        const existingData = localStorage.getItem(STORAGE_KEY);
        if (existingData) { localData = JSON.parse(existingData); }
        localData = localData.filter(w => w.id !== websiteId);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(localData));
        if (localData.length === 0) deleteMode = false;
        loadData();
        showToast("Stran izbrisana!");
    }

    function renderWebsites() {
      const wrapper = document.getElementById("app-wrapper");
      wrapper.style.fontFamily = `${config.font_family}, system-ui, sans-serif`;
      wrapper.style.backgroundColor = config.background_color;
      wrapper.style.color = config.text_color;

      wrapper.innerHTML = `
        <div class="min-h-full p-6">
          <div id="page-header" class="max-w-6xl mx-auto mb-8">
            <h1 class="font-bold mb-6" style="font-size: ${config.font_size * 1.75}px; color: ${config.text_color};">${config.page_title}</h1>
            <div class="flex gap-3 flex-wrap">
              <button id="add-website-btn" class="px-6 py-3 rounded-xl text-white font-semibold shadow-lg hover:opacity-90 transition-opacity" style="background-color: ${config.primary_action_color}; font-size: ${config.font_size}px;">${config.add_button_text}</button>
              <button id="delete-mode-btn" class="px-6 py-3 rounded-xl text-white font-semibold shadow-lg hover:opacity-90 transition-opacity" style="background-color: ${config.secondary_action_color}; font-size: ${config.font_size}px;">${deleteMode ? "Konƒçano" : "Uredi"}</button>
            </div>
            <p class="mt-4 opacity-50 text-sm">Opomba: Gumb "Dodaj" shrani stran samo za vas (lokalno).</p>
          </div>
          <div id="websites-grid" class="max-w-6xl mx-auto grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 ${deleteMode ? "delete-mode" : ""}">
            ${currentWebsites.length === 0 ? `<div class="col-span-full text-center py-16"><p>Ni strani.</p></div>` : currentWebsites.map(w => `
              <div class="app-icon relative flex flex-col items-center cursor-pointer" data-id="${w.id}">
                <div class="relative">
                  <div class="w-20 h-20 rounded-2xl shadow-lg flex items-center justify-center text-4xl" style="background-color: ${w.color};">${w.icon}</div>
                  <button class="delete-badge absolute -top-2 -right-2 w-7 h-7 bg-red-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg" style="opacity: ${deleteMode ? "1" : "0"}; pointer-events: ${deleteMode ? "auto" : "none"}; font-size: ${config.font_size * 1.125}px;">√ó</button>
                </div>
                <span class="mt-2 text-center px-1 line-clamp-2" style="font-size: ${config.font_size * 0.875}px; color: ${config.text_color};">${w.name}</span>
              </div>`).join("")}
          </div>
          <div id="toast-container" class="fixed top-6 left-1/2 transform -translate-x-1/2 z-50"></div>
          <div id="modal-container"></div>
        </div>
      `;

      document.getElementById("add-website-btn").addEventListener("click", showAddModal);
      document.getElementById("delete-mode-btn").addEventListener("click", toggleDeleteMode);
      document.querySelectorAll(".app-icon").forEach(icon => {
        const websiteId = icon.dataset.id;
        const website = currentWebsites.find(w => w.id === websiteId);
        icon.addEventListener("click", (e) => {
          if (!deleteMode && !e.target.classList.contains("delete-badge")) { window.open(website.url, "_blank", "noopener,noreferrer"); }
        });
        const deleteBtn = icon.querySelector(".delete-badge");
        if (deleteBtn) {
          deleteBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (publicWebsites.find(w => w.id === websiteId)) { showToast("Te strani ni mogoƒçe izbrisati!"); } else { showDeleteConfirmation(website); }
          });
        }
      });
    }

    function toggleDeleteMode() { deleteMode = !deleteMode; renderWebsites(); }
    function showAddModal() {
      const modal = document.getElementById("modal-container");
      modal.innerHTML = `
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div class="rounded-2xl shadow-2xl max-w-md w-full p-6" style="background-color: ${config.surface_color};">
            <h2 class="font-bold mb-6" style="font-size: ${config.font_size * 1.5}px; color: ${config.text_color};">Dodaj stran</h2>
            <form id="add-website-form">
              <div class="mb-4"><label class="block mb-2 font-semibold">Ime</label><input type="text" id="website-name" required class="w-full px-4 py-3 rounded-xl border-2 border-opacity-20 bg-transparent text-white"></div>
              <div class="mb-4"><label class="block mb-2 font-semibold">URL</label><input type="url" id="website-url" required class="w-full px-4 py-3 rounded-xl border-2 border-opacity-20 bg-transparent text-white"></div>
              <div class="flex gap-3"><button type="submit" class="flex-1 px-6 py-3 rounded-xl text-white font-semibold shadow-lg bg-blue-600">Shrani</button><button type="button" id="cancel-btn" class="flex-1 px-6 py-3 rounded-xl text-white font-semibold shadow-lg bg-gray-600">Prekliƒçi</button></div>
            </form>
          </div>
        </div>
      `;
      document.getElementById("add-website-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("website-name").value;
        let url = document.getElementById("website-url").value;
        if (!url.startsWith("http")) url = "https://" + url;
        saveLocalData({ id: "private_" + Date.now(), name, url, icon: "üåê", color: "#4ecdc4", createdAt: new Date().toISOString() });
        modal.innerHTML = "";
      });
      document.getElementById("cancel-btn").addEventListener("click", () => modal.innerHTML = "";
    }
    
    function showDeleteConfirmation(w) {
       const modal = document.getElementById("modal-container");
       modal.innerHTML = `<div class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="rounded-2xl shadow-2xl p-6 bg-gray-800 text-white"><p>Izbri≈°i ${w.name}?</p><button id="conf-del" class="bg-red-500 px-4 py-2 rounded mr-2">Da</button><button id="canc-del" class="bg-gray-600 px-4 py-2 rounded">Ne</button></div></div>`;
       document.getElementById("conf-del").onclick = () => { deleteLocalData(w.id); modal.innerHTML = ""; };
       document.getElementById("canc-del").onclick = () => modal.innerHTML = "";
    }
    
    function showToast(msg) {
        const t = document.createElement("div"); t.className = "toast px-6 py-3 rounded-xl shadow-2xl fixed top-6 left-1/2 -translate-x-1/2 bg-gray-800 text-white"; t.innerText = msg;
        document.getElementById("toast-container").appendChild(t);
        setTimeout(() => t.remove(), 3000);
    }

    loadData();
  </script>
 </body>
</html>